class HoaDon {
private:
    string maHoaDon;
    string maThe;
    Date ngMuon;
    Date ngTraThucTe;
    double phiQuaHan;
    double tongPhi;
    int soNgayQuaHan;
public:
    HoaDon() : phiQuaHan(0), tongPhi(0), soNgayQuaHan(0) {}

    void Nhap() {
        cout << "Nhap ma hoa don: "; cin >> maHoaDon;
        cout << "Nhap ma the: "; cin >> maThe;
        cout << "Nhap ngay muon:\n"; ngMuon.Nhap();
        cout << "Nhap ngay tra thuc te:\n"; ngTraThucTe.Nhap();
    }

    void Xuat() const {
        cout << "Ma hoa don: " << maHoaDon
            << "\nMa the: " << maThe
            << "\nNgay muon: "; ngMuon.Xuat();
        cout << "\nNgay tra thuc te: "; ngTraThucTe.Xuat();
        cout << "\nPhi qua han: " << phiQuaHan
            << "\nTong phi: " << tongPhi << endl;
    }
    void tinhVaCapNhatPhi(int soNgayChoPhep = soNgayMuonToiDa) {
        if (ngTraThucTe.TinhSoNgay() >= ngMuon.TinhSoNgay()) {
            long long soNgayChenhLech = ngTraThucTe.TinhSoNgay() - ngMuon.TinhSoNgay();

            soNgayQuaHan = (int)max(0LL, soNgayChenhLech - soNgayChoPhep);
        }
        else {
            soNgayQuaHan = 0;
        }

        phiQuaHan = soNgayQuaHan * phiPhatMoiNgay;
        tongPhi = phiQuaHan;
    }
};
